---
releaseTime: 2025/8/4
original: true
prev: false
next: false
editLink: false
comment: true

---

# 订单分库分表后,客户端如何下拉翻页?

> 做项目的时候遇到了这个问题,于是请教了同行,没几个人能说清楚的.
> 
> 估计是用的oracle这样的数据库吧,或者就没遇到需要分库分表的项目
> 
> 没办法,只能自己琢磨了

**按照传统的分页查询办法,肯定不行.鬼知道客户在以前的某个月是否有下订单.也不可能每张月份表去查询.**

**当发起订单后,我们就投放到redis里,最多缓存4*10个订单,因为之前看过一篇文章,提到一般用户最多下拉翻页到第四页,然后就会失去耐心不再翻页**

**如果翻页到4页后,想继续翻页呢?**

**当用户每创建一个订单,会有专门的一个表去记录,大概格式是:**


|  id  | user_id |              ext              |
|:----:|:-------:|:-----------------------------:|
|  1   |   100   | `{202504:4,202503:85,202106:5} `|

`{202504:4,202503:85,202106:5} `

代表用户2024年4月份有4个订单,202503有85个订单......

自己去实现一个算法,202504月份订单不够10个,就去202503借6个订单,大致是这样的逻辑.

等我空了会更新这个算法的实现









































